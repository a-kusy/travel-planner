{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Agnieszka\\\\Desktop\\\\studia\\\\Informatyka\\\\semestr 6\\\\Szkielety w aplikacjach internetowych\\\\Lab\\\\uwierzytelnianie\\\\client\\\\src\\\\components\\\\Trips\\\\TripTable.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef, useMemo } from \"react\";\nimport TripService from \"../TripService.js\";\nimport { useTable } from \"react-table\";\nimport { Link } from \"react-router-dom\";\nimport styles from \"../Main/styles.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst TripTable = props => {\n  _s();\n\n  const [trips, setTrips] = useState([]);\n  const tripRef = useRef();\n  tripRef.current = trips;\n  useEffect(() => {\n    retrieveTrips();\n  }, []);\n\n  const handleLogout = () => {\n    localStorage.removeItem(\"token\");\n    window.location.reload();\n  };\n\n  const retrieveTrips = () => {\n    TripService.getAll().then(res => {\n      setTrips(res.data);\n    }).catch(e => {\n      console.log(e);\n    });\n  };\n\n  const refreshTable = () => {\n    retrieveTrips();\n  };\n\n  const removeAllTrips = () => {\n    TripService.removeAll().then(res => {\n      console.log(res.data);\n      refreshTable();\n    }).catch(e => {\n      console.log(e);\n    });\n  };\n\n  const openTrip = rowIndex => {\n    const id = tripRef.current[rowIndex].id;\n    props.history.push(\"/trips/\" + id);\n  };\n\n  const deleteTrip = rowIndex => {\n    const id = tripRef.current[rowIndex].id;\n    TripService.remove(id).then(res => {\n      props.history.push(\"/trips\");\n      let newTrips = [...tripRef.current];\n      newTrips.splice(rowIndex, 1);\n      setTrips(newTrips);\n    }).catch(e => {\n      console.log(e);\n    });\n  };\n\n  const columns = useMemo(() => [{\n    Header: \"Nazwa\",\n    accessor: \"name\"\n  }, {\n    Header: \"Data\",\n    accessor: \"date\"\n  }, {\n    Header: \"Akcja\",\n    accessor: \"actions\",\n    Cell: props => {\n      const rowIndex = props.row.id;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          onClick: () => openTrip(rowIndex),\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"far fa-edit action mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          onClick: () => deleteTrip(rowIndex),\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-trash action\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 25\n      }, this);\n    }\n  }], []);\n  const {\n    getTableProps,\n    getTableBodyProps,\n    headerGroups,\n    rows,\n    prepareRow\n  } = useTable({\n    columns,\n    data: trips\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"\",\n    children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n      className: styles.navbar,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Planer podr\\xF3\\u017Cy\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: styles.white_btn,\n        onClick: handleLogout,\n        children: \"Wyloguj si\\u0119\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: styles.white_btn,\n        onClick: handleRemoveAcc,\n        children: \"Usu\\u0144 konto\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"list row\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-12 list\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table table-striped table-bordered\",\n          ...getTableProps(),\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: headerGroups.map(headerGroup => /*#__PURE__*/_jsxDEV(\"tr\", { ...headerGroup.getHeaderGroupProps(),\n              children: headerGroup.headers.map(column => /*#__PURE__*/_jsxDEV(\"th\", { ...column.getHeaderProps(),\n                children: column.render(\"Header\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 37\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 29\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", { ...getTableBodyProps(),\n            children: rows.map((row, i) => {\n              prepareRow(row);\n              return /*#__PURE__*/_jsxDEV(\"tr\", { ...row.getRowProps(),\n                children: row.cells.map(cell => {\n                  return /*#__PURE__*/_jsxDEV(\"td\", { ...cell.getCellProps(),\n                    children: cell.render(\"Cell\")\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 136,\n                    columnNumber: 45\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 33\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-sm btn-danger\",\n          onClick: removeAllTrips,\n          children: \"Usu\\u0144 wszystko\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/add\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-sm btn-danger\",\n            children: \"Dodaj\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 5\n  }, this);\n};\n\n_s(TripTable, \"17Q04Xcq2lkFONEkr/z+d+DBDXE=\", false, function () {\n  return [useTable];\n});\n\n_c = TripTable;\nexport default TripTable;\n\nvar _c;\n\n$RefreshReg$(_c, \"TripTable\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useMemo","TripService","useTable","Link","styles","TripTable","props","trips","setTrips","tripRef","current","retrieveTrips","handleLogout","localStorage","removeItem","window","location","reload","getAll","then","res","data","catch","e","console","log","refreshTable","removeAllTrips","removeAll","openTrip","rowIndex","id","history","push","deleteTrip","remove","newTrips","splice","columns","Header","accessor","Cell","row","getTableProps","getTableBodyProps","headerGroups","rows","prepareRow","navbar","white_btn","handleRemoveAcc","map","headerGroup","getHeaderGroupProps","headers","column","getHeaderProps","render","i","getRowProps","cells","cell","getCellProps"],"sources":["C:/Users/Agnieszka/Desktop/studia/Informatyka/semestr 6/Szkielety w aplikacjach internetowych/Lab/uwierzytelnianie/client/src/components/Trips/TripTable.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useMemo } from \"react\";\r\nimport TripService from \"../TripService.js\";\r\nimport { useTable } from \"react-table\";\r\nimport { Link } from \"react-router-dom\";\r\nimport styles from \"../Main/styles.module.css\"\r\n\r\nconst TripTable = (props) => {\r\n    const [trips, setTrips] = useState([]);\r\n    const tripRef = useRef();\r\n    tripRef.current = trips;\r\n\r\n    useEffect(() => {\r\n        retrieveTrips();\r\n    }, []);\r\n\r\n    const handleLogout = () => {\r\n        localStorage.removeItem(\"token\")\r\n        window.location.reload()\r\n    }\r\n\r\n    const retrieveTrips = () => {\r\n        TripService.getAll()\r\n            .then((res) => {\r\n                setTrips(res.data);\r\n            })\r\n            .catch((e) => {\r\n                console.log(e);\r\n            });\r\n    };\r\n\r\n    const refreshTable = () => {\r\n        retrieveTrips();\r\n    };\r\n\r\n    const removeAllTrips = () => {\r\n        TripService.removeAll()\r\n            .then((res) => {\r\n                console.log(res.data);\r\n                refreshTable();\r\n            })\r\n            .catch((e) => {\r\n                console.log(e);\r\n            });\r\n    };\r\n\r\n    const openTrip = (rowIndex) => {\r\n        const id = tripRef.current[rowIndex].id;\r\n        props.history.push(\"/trips/\" + id);\r\n    };\r\n\r\n    const deleteTrip = (rowIndex) => {\r\n        const id = tripRef.current[rowIndex].id;\r\n        TripService.remove(id)\r\n            .then((res) => {\r\n                props.history.push(\"/trips\");\r\n                let newTrips = [...tripRef.current]\r\n                newTrips.splice(rowIndex, 1)\r\n                setTrips(newTrips)\r\n            })\r\n            .catch((e) => {\r\n                console.log(e)\r\n            })\r\n    }\r\n\r\n    const columns = useMemo(() =>\r\n        [\r\n            {\r\n                Header: \"Nazwa\",\r\n                accessor: \"name\",\r\n            },\r\n            {\r\n                Header: \"Data\",\r\n                accessor: \"date\",\r\n            },\r\n            {\r\n                Header: \"Akcja\",\r\n                accessor: \"actions\",\r\n                Cell: (props) => {\r\n                    const rowIndex = props.row.id;\r\n                    return (\r\n                        <div>\r\n                            <span onClick={() => openTrip(rowIndex)}>\r\n                                <i className=\"far fa-edit action mr-2\"></i>\r\n                            </span>\r\n                            <span onClick={() => deleteTrip(rowIndex)}>\r\n                                <i className=\"fas fa-trash action\"></i>\r\n                            </span>\r\n                        </div>\r\n                    )\r\n                }\r\n            }\r\n        ], []);\r\n\r\n    const {\r\n        getTableProps,\r\n        getTableBodyProps,\r\n        headerGroups,\r\n        rows,\r\n        prepareRow,\r\n    } = useTable({\r\n        columns,\r\n        data: trips,\r\n    });\r\n\r\n    return (\r\n    <div className=\"\">\r\n        <nav className={styles.navbar}>\r\n                <h1>Planer podróży</h1>\r\n                <button className={styles.white_btn} onClick={handleLogout}>\r\n                    Wyloguj się\r\n                </button>\r\n                <button className={styles.white_btn} onClick={handleRemoveAcc}>Usuń konto</button>\r\n        </nav>\r\n        \r\n        <div className=\"list row\">\r\n            <div className=\"col-md-12 list\">\r\n                <table className=\"table table-striped table-bordered\" {...getTableProps()}>\r\n                    <thead>\r\n                        {headerGroups.map((headerGroup) => (\r\n                            <tr {...headerGroup.getHeaderGroupProps()}>\r\n                                {headerGroup.headers.map((column) => (\r\n                                    <th {...column.getHeaderProps()}>\r\n                                        {column.render(\"Header\")}\r\n                                    </th>\r\n                                ))}\r\n                            </tr>\r\n                        ))}\r\n                    </thead>\r\n                    <tbody {...getTableBodyProps()}>\r\n                        {rows.map((row, i) => {\r\n                            prepareRow(row);\r\n                            return (\r\n                                <tr {...row.getRowProps()}>\r\n                                    {row.cells.map((cell) => {\r\n                                        return (\r\n                                            <td {...cell.getCellProps()}>{cell.render(\"Cell\")}</td>\r\n                                        );\r\n                                    })}\r\n                                </tr>\r\n                            );\r\n                        })}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <div className=\"col-md-8\">\r\n                <button className=\"btn btn-sm btn-danger\" onClick={removeAllTrips}>Usuń wszystko\r\n                </button>\r\n                <Link to=\"/add\">\r\n                    <button className=\"btn btn-sm btn-danger\">Dodaj</button>\r\n                </Link>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    );\r\n};\r\nexport default TripTable;"],"mappings":"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"},"metadata":{},"sourceType":"module"}